<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Imports mzXML/mzML files with MS/MS scans — import_mzxml • MS2extract</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Imports mzXML/mzML files with MS/MS scans — import_mzxml"><meta name="description" content="This function reads .mzXML and .mzML files containing MS/MS.
This function is inspired on masstools::read_mzxml()which imports
the data as a list. Then, each element in a list represents one scan.
Also, each scans contains
two sub-lists that contain (1) the scan information and
(2) the spectra per scan."><meta property="og:description" content="This function reads .mzXML and .mzML files containing MS/MS.
This function is inspired on masstools::read_mzxml()which imports
the data as a list. Then, each element in a list represents one scan.
Also, each scans contains
two sub-lists that contain (1) the scan information and
(2) the spectra per scan."><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-SB0NT1KJYH"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SB0NT1KJYH');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MS2extract</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.99.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Aintroduction.html">1 - Introduction to MS2extract</a></li>
    <li><a class="dropdown-item" href="../articles/Busing_batch_extract.html">2 - Using the MS2extract batch pipeline</a></li>
    <li><a class="dropdown-item" href="../articles/Cimport_mzml_explanation.html">3 - Behind the curtains of importing MS/MS data</a></li>
    <li><a class="dropdown-item" href="../articles/Dmsconvert_4_MS2extract.html">4 - Using MSconvert to filter useful standard MS/MS data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CooperstoneLab/MS2extract" aria-label="Github"><span class="fa fa-github"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/cristianquirozd" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.linkedin.com/in/danielquirozmoreno/" aria-label="Linkedin"><span class="fa fa-linkedin"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Imports mzXML/mzML files with MS/MS scans</h1>
      <small class="dont-index">Source: <a href="https://github.com/CooperstoneLab/MS2extract/blob/main/R/import_mzxml.R" class="external-link"><code>R/import_mzxml.R</code></a></small>
      <div class="d-none name"><code>import_mzxml.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function reads <code>.mzXML</code> and <code>.mzML</code> files containing MS/MS.
This function is inspired on <code>masstools::read_mzxml()</code>which imports
the data as a list. Then, each element in a list represents one scan.
Also, each scans contains
two sub-lists that contain (1) the scan information and
(2) the spectra per scan.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">import_mzxml</span><span class="op">(</span>file <span class="op">=</span> <span class="cn">NULL</span>, met_metadata <span class="op">=</span> <span class="cn">NULL</span>, ppm <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-file">file<a class="anchor" aria-label="anchor" href="#arg-file"></a></dt>
<dd><p>file name and path of the .mzXML or .mzML MS/MS data</p></dd>


<dt id="arg-met-metadata">met_metadata<a class="anchor" aria-label="anchor" href="#arg-met-metadata"></a></dt>
<dd><p>a data frame with the following columns.</p>
<p><strong>Required</strong>:</p><dl><dt>Formula</dt>
<dd><p>A character string specifying the metabolite formula</p></dd>

<dt>Ionization_mode</dt>
<dd><p>The ionization mode employed in data collection. It
can be only Positive or Negative</p></dd>

<dt>Ionization_mode</dt>
<dd><p>The ionization mode set in data collection
(only Positive and Negative mode allowed).</p></dd>

<dt>File</dt>
<dd><p>The filename of the mzXML file inluding the path</p></dd>

<dt>COLLISIONENERGY</dt>
<dd><p>Collision energy applied in MS/MS fragmentation</p></dd>


</dl><p>These two columns are mandatory since the formula is used by the Rdisop
package to calculate the exact mass and the ionization mode
determine whether the the mass of the a proton is added or subtracted to
calculate the charged mass.</p>
<p>Additionally, you can provide the minimum and maximum retention times
to look for a peak only within a given area by including the following
columns:</p>
<dl><dt>min_rt</dt>
<dd><p>numeric, with the minimum retention time to keep</p></dd>

<dt>max_rt</dt>
<dd><p>numeric, with the minimum retention time to keep</p></dd>



</dl><p>These two columns are highly recommended to be included to narrow down
the search window and ensure the peak you want is selected. This is
especially important if you have multiple peaks in the same data file.</p></dd>


<dt id="arg-ppm">ppm<a class="anchor" aria-label="anchor" href="#arg-ppm"></a></dt>
<dd><p>the mass error in ppm. 10 ppm is the default value.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>data.frame in a tidy format for MS/MS spectra in a tidy format.</p><dl><dt>mz</dt>
<dd><p>ion <em>m</em>/<em>z</em> value</p></dd>

<dt>intensity</dt>
<dd><p>ion intensity count</p></dd>

<dt>mz_precursor</dt>
<dd><p>precursor ion</p></dd>

<dt>rt</dt>
<dd><p>retention time (in seconds)</p></dd>

<dt>Formula</dt>
<dd><p>Chemical formula provided in <code>met_metada</code></p></dd>


</dl></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># Importing the Spectrum of Procyanidin A2 in negative ionization mode</span></span></span>
<span class="r-in"><span><span class="co"># and 20 eV as the collision energy</span></span></span>
<span class="r-in"><span><span class="va">ProcA2_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"ProcyanidinA2_neg_20eV.mzXML"</span>,</span></span>
<span class="r-in"><span>  package <span class="op">=</span> <span class="st">"MS2extract"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Compound metadata without ROI information</span></span></span>
<span class="r-in"><span><span class="va">ProcA2_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span>Formula <span class="op">=</span> <span class="st">"C30H24O12"</span>, Ionization_mode <span class="op">=</span> <span class="st">"Negative"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ProcA2_raw</span> <span class="op">&lt;-</span> <span class="fu">import_mzxml</span><span class="op">(</span><span class="va">ProcA2_file</span>, met_metadata <span class="op">=</span> <span class="va">ProcA2_data</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • Processing: ProcyanidinA2_neg_20eV.mzXML</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • Found 1 CE value: 20</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • Remember to match CE velues in <span style="font-style: italic;">spec_metadata</span> when exporting your library</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • m/z range given 10 ppm: 575.11376 and 575.12526</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 26731 ions detected in total</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">ProcA2_raw</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 19369     6</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Region of interest table (rt in seconds)</span></span></span>
<span class="r-in"><span><span class="va">ProcA2_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  Formula <span class="op">=</span> <span class="st">"C30H24O12"</span>, Ionization_mode <span class="op">=</span> <span class="st">"Negative"</span>,</span></span>
<span class="r-in"><span>  min_rt <span class="op">=</span> <span class="fl">163</span>, max_rt <span class="op">=</span> <span class="fl">180</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">ProcA2_roi</span> <span class="op">&lt;-</span> <span class="fu">import_mzxml</span><span class="op">(</span><span class="va">ProcA2_file</span>, met_metadata <span class="op">=</span> <span class="va">ProcA2_data</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • Processing: ProcyanidinA2_neg_20eV.mzXML</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • Found 1 CE value: 20</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • Remember to match CE velues in <span style="font-style: italic;">spec_metadata</span> when exporting your library</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • m/z range given 10 ppm: 575.11376 and 575.12526</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># 24249 ions detected in ROI</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/dim.html" class="external-link">dim</a></span><span class="op">(</span><span class="va">ProcA2_roi</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 17829     6</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Cristian Quiroz-Moreno, Jessica Cooperstone.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

