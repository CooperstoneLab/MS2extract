<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Batch import mzxml files — batch_import_mzxml • MS2extract</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Batch import mzxml files — batch_import_mzxml"><meta name="description" content="This function imports multiple .mzXML/.mzML files into a named list.
It takes a data frame containing the basic information of
metabolites such as file name (including the file path), Chemical formula,
Ionization mode, and Collision Energy, as required fields.
Additionally, Region Of Interest (ROI) can be provided to narrow down
the elution window."><meta property="og:description" content="This function imports multiple .mzXML/.mzML files into a named list.
It takes a data frame containing the basic information of
metabolites such as file name (including the file path), Chemical formula,
Ionization mode, and Collision Energy, as required fields.
Additionally, Region Of Interest (ROI) can be provided to narrow down
the elution window."><!-- Global site tag (gtag.js) - Google Analytics --><script async src="https://www.googletagmanager.com/gtag/js?id=G-SB0NT1KJYH"></script><script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-SB0NT1KJYH');
</script></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">MS2extract</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.99.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Aintroduction.html">1 - Introduction to MS2extract</a></li>
    <li><a class="dropdown-item" href="../articles/Busing_batch_extract.html">2 - Using the MS2extract batch pipeline</a></li>
    <li><a class="dropdown-item" href="../articles/Cimport_mzml_explanation.html">3 - Behind the curtains of importing MS/MS data</a></li>
    <li><a class="dropdown-item" href="../articles/Dmsconvert_4_MS2extract.html">4 - Using MSconvert to filter useful standard MS/MS data</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/CooperstoneLab/MS2extract" aria-label="Github"><span class="fa fa-github"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://twitter.com/cristianquirozd" aria-label="Twitter"><span class="fa fa-twitter"></span></a></li>
<li class="nav-item"><a class="external-link nav-link" href="https://www.linkedin.com/in/danielquirozmoreno/" aria-label="Linkedin"><span class="fa fa-linkedin"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Batch import mzxml files</h1>
      <small class="dont-index">Source: <a href="https://github.com/CooperstoneLab/MS2extract/blob/main/R/batch_import.R" class="external-link"><code>R/batch_import.R</code></a></small>
      <div class="d-none name"><code>batch_import_mzxml.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function imports multiple <code>.mzXML</code>/<code>.mzML</code> files into a named list.
It takes a data frame containing the basic information of
metabolites such as file name (including the file path), Chemical formula,
Ionization mode, and Collision Energy, as required fields.
Additionally, Region Of Interest (ROI) can be provided to narrow down
the elution window.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">batch_import_mzxml</span><span class="op">(</span><span class="va">compounds_dt</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-compounds-dt">compounds_dt<a class="anchor" aria-label="anchor" href="#arg-compounds-dt"></a></dt>
<dd><p>a data frame containing the following columns.</p><dl><dt>Name</dt>
<dd><p>The name of the compound</p></dd>

<dt>Formula</dt>
<dd><p>The compound's chemical formula</p></dd>

<dt>Ionization_mode</dt>
<dd><p>The ionization mode set in data collection
(only Positive and Negative mode allowed).</p></dd>

<dt>File</dt>
<dd><p>The filename of the <code>.mzXML</code>/<code>.mzML</code> file inluding the path</p></dd>

<dt>COLLISIONENERGY</dt>
<dd><p>Collision energy applied in MS/MS fragmentation</p></dd>


</dl><p>Additionally, you can provide the ROI by adding two columns
in the data frame.</p>
<dl><dt>min_rt</dt>
<dd><p>a double, minumim retention time to keep</p></dd>

<dt>max_rt</dt>
<dd><p>a double maximum retention time to keep</p></dd>


</dl></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a list with <em>n</em> elements, where n is the number of compounds
provided in the <code>compounds_dt</code></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Select the csv file name and path</span></span></span>
<span class="r-in"><span><span class="va">batch_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, <span class="st">"batch_read.csv"</span>,</span></span>
<span class="r-in"><span>  package <span class="op">=</span> <span class="st">"MS2extract"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># Read the data frame</span></span></span>
<span class="r-in"><span><span class="va">batch_data</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/utils/read.table.html" class="external-link">read.csv</a></span><span class="op">(</span><span class="va">batch_file</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># File paths for Procyanidin A2 and Rutin</span></span></span>
<span class="r-in"><span><span class="va">ProcA2_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"ProcyanidinA2_neg_20eV.mzXML"</span>,</span></span>
<span class="r-in"><span>  package <span class="op">=</span> <span class="st">"MS2extract"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">Rutin_file</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"Rutin_neg_20eV.mzXML"</span>,</span></span>
<span class="r-in"><span>  package <span class="op">=</span> <span class="st">"MS2extract"</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Add file path - User should specified the file path -</span></span></span>
<span class="r-in"><span><span class="va">batch_data</span><span class="op">$</span><span class="va">File</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="va">ProcA2_file</span>, <span class="va">Rutin_file</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Checking batch_data data frame</span></span></span>
<span class="r-in"><span><span class="va">batch_data</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>             Name   Formula Ionization_mode min_rt max_rt COLLISIONENERGY</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 Procyanidin A2 C30H24O12        Negative    163    180           20 eV</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2          Rutin C27H30O16        Negative    162    171           20 eV</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>                                                                              File</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1 /home/runner/work/_temp/Library/MS2extract/extdata/ProcyanidinA2_neg_20eV.mzXML</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2         /home/runner/work/_temp/Library/MS2extract/extdata/Rutin_neg_20eV.mzXML</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Using batch import to import multiple compounds</span></span></span>
<span class="r-in"><span><span class="va">batch_compounds</span> <span class="op">&lt;-</span> <span class="fu">batch_import_mzxml</span><span class="op">(</span><span class="va">batch_data</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">Begining batch import</span> <span style="color: #00BBBB;">───────────────────────────────────────────────────────</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">--</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • Processing: ProcyanidinA2_neg_20eV.mzXML</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • Found 1 CE value: 20</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • Remember to match CE velues in <span style="font-style: italic;">spec_metadata</span> when exporting your library</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • m/z range given 10 ppm: 575.11376 and 575.12526</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • Compound name: <span style="color: #00BB00;">Procyanidin A2_Negative_20</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> ── <span style="font-weight: bold;">--</span> ──</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • Processing: Rutin_neg_20eV.mzXML</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • Found 1 CE value: 20</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • Remember to match CE velues in <span style="font-style: italic;">spec_metadata</span> when exporting your library</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • m/z range given 10 ppm: 609.14002 and 609.15221</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> • Compound name: <span style="color: #00BB00;">Rutin_Negative_20</span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> </span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">──</span> <span style="font-weight: bold;">End batch import</span> <span style="color: #00BBBB;">────────────────────────────────────────────────────────────</span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Checking dimension by compound</span></span></span>
<span class="r-in"><span><span class="co"># Procyanidin A2: 24249 ions</span></span></span>
<span class="r-in"><span><span class="co"># Rutin: 22096 ions</span></span></span>
<span class="r-in"><span><span class="fu">purrr</span><span class="fu">::</span><span class="fu"><a href="https://purrr.tidyverse.org/reference/map.html" class="external-link">map</a></span><span class="op">(</span><span class="va">batch_compounds</span>, <span class="va">dim</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $`Procyanidin A2_Negative_20`</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 24249     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> $Rutin_Negative_20</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] 22096     6</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Cristian Quiroz-Moreno, Jessica Cooperstone.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

